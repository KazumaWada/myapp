<% if @posts.any? %>

 <% @posts.each do |p| %>
 <%= link_to post_path(p), class: 'text-body' do %> 

   <div class="card mt-2">
      <%= image_tag p.image.url, class: 'img-fluid' %>
      <% end %><%# post_path_link %>
      <div class="card-body">
    　<h5 class="card-title">
      <%= link_to user_path(p.user) do %>

     <% if p.user.avatar? %>
     <%= image_tag p.user.avatar.url, class: "rounded-circle ", width: "40px", height: "40px" %>
     <% else %>
     <%= image_tag "the-main.jpg", class: "rounded-circle", width: "40px", height: "40px" %>
     <% end %>
      <%# link_to p.user.avatar.url, current_user %>
      <%#image_tag p.user.avatar.url, class: "rounded-circle", width: "40px", height: "40px" %>

      <p><%= p.user.name %></p> 
      <% end %>
      <%= p.title %>
        <%# render_with_hashtags(p.content) %>
      </h5>
        <p class="card-text">
        <%# ###########いいね###################### %>

<%# ###########いいね###################### %>


       
        <%# link_to posts_hashtag_path(p.tags) do %> 
        <% p.tags.each do |tag| %>
    　　<span><i class="fas fa-tag"><%= tag.name %></i></span>
        <% end %>
        <%# end %>

        <span>
        <i class="fas fa-eye"><%= p.impressions_count %></i>
        </span>

        </p>
      </div><%# card-body %>
    </div><%# card %>
     
    <% end %><%# each %>
  
     <% end %> <%# ifpostsany? %>
 


<%# post/showが、@post.user.name これで表示できたから、これもavatarいけると思う。 %>

  <%# アバターは、@postループの外でやればいい。
  もしくは、@postから、avatarまでたどり着いて、ループの中に書くか。
  以前までは、belongs_toがなぜかコメントアウトされていたから、今回はうまくいくと思うよ。 %>

